generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL")
}

model Users {
  id         Int         @id @default(autoincrement())
  email      String      @unique @db.VarChar(255)
  password   String      @db.VarChar(255)
  created_on DateTime?   @default(now()) @db.Timestamp(6)
  last_login DateTime?   @db.Timestamp(6)
  username   String      @db.VarChar(255)
  isPublic   Boolean     @default(false)
  sessions   Session[]
  mapResults MapResult[]
  subscribed_series Subscribed_TVSeries[]
}

model Session {
  id        Int      @id @default(autoincrement())
  sessionId String   @unique
  userId    Int
  createdAt DateTime

  // Prisma will infer the relationship based on naming conventions
  user Users @relation(fields: [userId], references: [id])
}

model MapResult {
  id        Int      @id @default(autoincrement())
  userId    Int
  map       String
  mapdrops  Int
  divine    Int
  chaos     Int
  createdAt DateTime @default(now())

  // Define the relationship with Users
  user Users @relation(fields: [userId], references: [id])
}

model TVSeries {
  // Unique identifier for each anime
  id Int @id @default(autoincrement())
  title String
  description String?
  year Int?
  season String?
  genres String[]
  rating String?
  episodes Int?
  studio String?
  // Is Anime?
  isAnime Boolean
  createdAt DateTime @default(now())
  // Date when the anime record was last updated
  updatedAt DateTime @updatedAt
}

model Subscribed_TVSeries {
  id Int @id @default(autoincrement())
  userId Int
  title String
  description String?
  imgurl String
  type SeriesType

  user Users @relation(fields:[userId], references: [id])
}

enum SeriesType {
  TVSERIES
  ANIME
}
